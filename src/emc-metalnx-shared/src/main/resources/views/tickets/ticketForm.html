<!-- Create Ticket Form -->
<form role="form" class="container-fluid registerForm"
      method="POST" th:object="${ticket}"
      th:action="@{${requestMapping}}">
    <input type="hidden" class="form-control" id="inputPath" th:field="*{path}"/>
    <div class="form-group">
        <label class="control-label" th:text="#{tickets.form.path.label}"></label>
        <span id="selectedPath"></span>
    </div>
    <div class="form-group">
        <label for="input-permission" class="control-label" th:text="#{tickets.form.permission.label}"></label>
        <div class="">
            <select id="input-permission" class="form-control" th:field="*{type}">
                <option value="READ" th:text="#{tickets.form.permission.option.read.label}"></option>
                <option value="WRITE" th:text="#{tickets.form.permission.option.write.label}"></option>
            </select>
        </div>
    </div>
    <button id="btnShowAdvancedSettings" type="button" class="btn btn-link pull-right" th:text="#{tickets.form.show.advanced.settings.button}"></button>
    <button id="btnHideAdvancedSettings" type="button" class="btn btn-link pull-right hidden" th:text="#{tickets.form.hide.advanced.settings.button}"></button>
    <div class="advanced-settings hidden">
        <div class="form-group">
            <label for="inputTicketString" class="control-label" th:text="#{tickets.form.ticket.string.label}"></label>
            <div class="">
                <input type="text" class="form-control" id="inputTicketString" th:placeholder="#{tickets.form.ticket.string.placeholder}" th:field="*{ticketString}" value=""/>
            </div>
        </div>
        <div class="form-group">
            <label for="inputUsesLimit" class="control-label" th:text="#{tickets.form.uses.limit.label}"></label>
            <div class="">
                <input type="text" class="form-control" id="inputUsesLimit" th:placeholder="#{tickets.form.uses.limit.placeholder}" th:field="*{usesLimit}" th:value="*{usesLimit}==0?'':*{usesLimit}"/>
            </div>
        </div>
        <div class="form-group">
            <label for="inputWriteByteLimit" class="control-label" th:text="#{tickets.form.write.byte.limit.label}"></label>
            <div class="">
                <input type="text" class="form-control" id="inputWriteByteLimit" th:placeholder="#{tickets.form.write.byte.limit.placeholder}" th:field="*{writeByteLimit}" value=""/>
            </div>
        </div>
        <div class="form-group">
            <label for="inputWriteFileLimit" class="control-label" th:text="#{tickets.form.write.file.limit.label}"></label>
            <div class="">
                <input type="text" class="form-control" id="inputWriteFileLimit" th:placeholder="#{tickets.form.write.file.limit.placeholder}" th:field="*{writeFileLimit}" value=""/>
            </div>
        </div>
        <div class="form-group">
            <label for="inputExpirationDate" class="control-label" th:text="#{tickets.form.expiration.date.label}"></label>
            <div class="">
                <input type="text" class="form-control" id="inputExpirationDate" th:placeholder="#{tickets.form.expiration.date.placeholder}" th:field="*{expirationDate}" value=""/>
            </div>
        </div>
    </div>
</form>

<script th:inline="javascript">
/*<![CDATA[*/
    $(document).ready(function(e){
        if ($("#inputUsesLimit").val()==0){
            $("#inputUsesLimit").val('');
        }
        if ($("#inputWriteByteLimit").val()==0){
            $("#inputWriteByteLimit").val('');
        }
        if ($("#inputWriteFileLimit").val()==0){
            $("#inputWriteFileLimit").val('');
        }

        $("#btnShowAdvancedSettings").click(function(){
            $(".advanced-settings").removeClass("hidden");
            $(this).addClass("hidden");
            $("#btnHideAdvancedSettings").removeClass("hidden");
        });

        $("#btnHideAdvancedSettings").click(function(){
            $(".advanced-settings").addClass("hidden");
            $(this).addClass("hidden");
            $("#btnShowAdvancedSettings").removeClass("hidden");
        });

        $("#inputExpirationDate").datepicker({
				dateFormat: "yy-mm-dd",
				minDate: 1
        });
    });
/*]]>*/
</script>